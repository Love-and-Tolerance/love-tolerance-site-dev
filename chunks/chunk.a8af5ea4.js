class s{isArray(){return this instanceof o}isObject(){return this instanceof u}isPrimitive(){return this instanceof l}isNull(){return this instanceof n}getAsObject(){if(!this.isObject())throw new Error(`Not a JSON Object: ${this.toString()}`);return this}getAsArray(){if(!this.isArray())throw new Error(`Not a JSON Array: ${this.toString()}`);return this}getAsPrimitive(){if(!this.isPrimitive())throw new Error(`Not a JSON Primitive: ${this.toString()}`);return this}getAsNull(){if(!this.isNull())throw new Error(`Not a JSON Null: ${this.toString()}`);return this}getAsBoolean(){throw new Error("Unsupported operation")}getAsNumber(){throw new Error("Unsupported operation")}getAsInteger(){return this.getAsNumber()|0}getAsString(){throw new Error("Unsupported operation")}toJSON(){return JSON.stringify(this.serialize())}toString(){return this.toJSON()}}class o extends s{constructor(...t){super(...t),o.prototype.__init.call(this)}__init(){this.values=[]}clone(){const t=new o;return this.values.forEach(e=>{t.add(e.clone())}),t}add(t){let e=n.INSTANCE;return t!==null&&(t instanceof s?e=t:e=new l(t)),this.values.push(e),this}addAll(t){return t.values.forEach(e=>{this.values.push(e)}),this}set(t,e){return this.values[t]=e,this}remove(t){let e,i;return typeof t=="number"?(e=t,i=this.values[e]):(e=this.values.indexOf(t),i=e>-1),(i===!0||i!==void 0)&&this.values.splice(e,1),i}includes(t){return this.values.includes(t)}size(){return this.values.length}isEmpty(){return this.values.length===0}iterator(){return this.values[Symbol.iterator]()}get(t){const e=this.values[t];if(e===void 0)throw new Error(`No element at index ${t}`);return e}getAsBoolean(){if(this.values.length!==1)throw new Error("Operation not supported");return this.get(0).getAsBoolean()}getAsNumber(){if(this.values.length!==1)throw new Error("Operation not supported");return this.get(0).getAsNumber()}getAsString(){if(this.values.length!==1)throw new Error("Operation not supported");return this.get(0).getAsString()}serialize(){const t=[];return this.values.forEach(e=>{t.push(e.serialize())}),t}}class n extends s{__init(){this.__proto__=s}static __initStatic(){this.INSTANCE=new n}constructor(){super(),n.prototype.__init.call(this)}clone(){return n.INSTANCE}serialize(){return null}}n.__initStatic();function a(r,t){return r??t()}class u extends s{constructor(...t){super(...t),u.prototype.__init.call(this)}__init(){this.children=new Map}clone(){const t=new u;return this.children.forEach((e,i)=>{t.set(i,e.clone())}),t}set(t,e){let i=n.INSTANCE;return e!==null&&(e instanceof s?i=e:i=new l(e)),this.children.set(t,i),this}delete(t){return this.children.delete(t)}entries(){return this.children.entries()}keys(){return this.children.keys()}size(){return this.children.size}has(t){return this.children.has(t)}get(t){return a(this.children.get(t),()=>null)}getPrimitive(t){const e=this.children.get(t);if(e==null)throw new Error(`No element "${t}"`);return e.getAsPrimitive()}getArray(t){const e=this.children.get(t);if(e==null)throw new Error(`No element "${t}"`);return e.getAsArray()}getObject(t){const e=this.children.get(t);if(e==null)throw new Error(`No element "${t}"`);return e.getAsObject()}serialize(){const t={};return this.children.forEach((e,i)=>{t[i]=e.serialize()}),t}}class l extends s{constructor(t){super(),this.value=t}clone(){return this}isBoolean(){return typeof this.value=="boolean"}isNumber(){return typeof this.value=="number"}isString(){return typeof this.value=="string"}getAsBoolean(){switch(typeof this.value){case"boolean":return this.value;case"string":return this.value.toLowerCase()==="true";default:throw new Error(`Not JSON Boolean: ${this.value}`)}}getAsNumber(){switch(typeof this.value){case"number":return this.value;case"string":return parseFloat(this.value);default:throw new Error(`Not JSON Number: ${String(this.value)}`)}}getAsString(){return typeof this.value=="string"?this.value:String(this.value)}serialize(){return this.value}}function c(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"}function g(r){const t=new o;return r.forEach(e=>{t.add(h(e))}),t}function f(r){const t=new u;return Object.entries(r).forEach(([e,i])=>{t.set(e,h(i))}),t}function h(r){if(r===null)return n.INSTANCE;if(c(r))return new l(r);if(Array.isArray(r))return g(r);if(typeof r=="object")return f(r);throw new Error(`Not JSON Element: ${String(r)}`)}export{h as c};
