import{Z as f,m as s}from"./index.cf4744a4.js";function l(t){return t.reduce((r,e)=>typeof e=="number"?r+"["+e+"]":r+(r===""?"":".")+e,"")}class d extends Error{constructor(r,e){super(r),this.details=e.details}}function w(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{maxIssuesInMessage:e=99,issueSeparator:n="; ",prefixSeparator:o=": ",prefix:i="Validation error"}=r,c=t.errors.slice(0,e).map(g=>{const{message:h,path:u}=g;return u.length>0?`${h} at "${l(u)}"`:h}).join(n),p=c?[i,c].join(o):i;return new d(p,{details:t.errors})}function j(t){return console.error(t),t instanceof f&&(t=w(t).message),`${t}`}function a(t){return t===void 0||t===""}function $(t){if(t.startsWith("https://github.com/"))return t.replace("https://github.com/","");if(t.startsWith("git@github.com:"))return t.replace("git@github.com:","");throw new Error(`Only SSH- and HTTPS-like GitHub URLs are supported (${t})`)}function b(t,r){return a(r)?t.replace(/\.git$/,""):t}class m{owner;name;branch;constructor(r,e,n){this.owner=r,this.name=e,n!==void 0&&(this.branch=n)}static fromUrl(r,e){const[n,o,i]=$(r).split("/");if(a(n)||a(o))throw new Error(`GitHub URL must contain repo's owner and name (${r})`);return new m(n,b(o,i),e)}getBranch(){return this.branch??"HEAD"}rawContentUrl(r){return`https://raw.githubusercontent.com/${this.owner}/${this.name}/${this.getBranch()}/${r}`}getUrl(r,e){let n=`https://github.com/${this.owner}/${this.name}/`;return r!==void 0&&(n+=`${r}/${this.getBranch()}/`,e!==void 0&&(n+=e)),n}async fetchInfo(){const r=await fetch(`https://api.github.com/repos/${this.owner}/${this.name}`,{headers:{Accept:"application/vnd.github.v3+json"}});if(r.status!==200)throw new Error(`Failed to fetch repo info: ${r.status}`);return await r.json()}}const v=s.object({mc_versions:s.string(),pack_format:s.string(),tag:s.string(),release_url:s.string(),version:s.string(),filename:s.string(),url:s.string()});export{v as B,m as G,j as h};
