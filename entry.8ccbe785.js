import{S as q,i as F,s as K,e as A,P as R,d as y,f as H,Q as U,h as _,j as S,V as B,l as T,m as V,R as $,p as O,w as le,y as ce,I as ue,J as fe,K as de,t as C,r as M,L as he,b as J,g as L,O as ee,E as Q,F as Z,T as z,N as me,M as te,C as ge,W as ve}from"./chunks/chunk.04e4fa0f.js";import{m as j}from"./chunks/chunk.7da70b4d.js";/* empty css                     */function be(n){return n.reduce((e,t)=>typeof t=="number"?e+"["+t+"]":e+(e===""?"":".")+t,"")}class we extends Error{constructor(e,t){super(e),this.details=t.details}}function ke(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{maxIssuesInMessage:t=99,issueSeparator:r="; ",prefixSeparator:o=": ",prefix:s="Validation error"}=e,i=n.errors.slice(0,t).map(v=>{const{message:u,path:b}=v;return b.length>0?`${u} at "${be(b)}"`:u}).join(r),h=i?[s,i].join(o):s;return new we(h,{details:n.errors})}const Ie=j.object({mc_versions:j.number(),pack_format:j.number(),version:j.string(),filename:j.string(),url:j.string()}),Ve=j.object({name:j.string(),id:j.string(),branch:j.optional(j.string()),url:j.optional(j.string()),"pack.png":j.optional(j.string()),description:j.optional(j.string())}),je=j.object({name:j.string(),id_pos:j.number(),default:j.string(),variants:j.array(Ve)}),De=j.object({repos:j.object({base:Ie,addons:j.array(je)})});function W(n){return n===void 0||n===""}function Ee(n){if(n.startsWith("https://github.com/"))return n.replace("https://github.com/","");if(n.startsWith("git@github.com:"))return n.replace("git@github.com:","");throw new Error(`Unsupported URL. Only SSH- and HTTPS-like GitHub URLs are supported (${n})`)}function Se(n,e){return W(e)?n.replace(/\.git$/,""):n}function pe(n){const[e,t,r]=Ee(n).split("/");if(W(e)||W(t))throw new Error(`GitHub URL must contain repo's owner and name (${n})`);return{owner:e,name:Se(t,r)}}function _e(n,e,t){return e??="HEAD",`https://raw.githubusercontent.com/${n.owner}/${n.name}/${e}/${t}`}function Ae(n,e,t,r){let o=`https://github.com/${n.owner}/${n.name}/`;return t!==void 0&&(e??="tree",o+=`${e}/${t}/`,r!==void 0&&(o+=r)),o}function ye(n){let e,t,r,o;return{c(){e=A("div"),t=R(n[1]),this.h()},l(s){e=y(s,"DIV",{class:!0});var i=H(e);t=U(i,n[1]),i.forEach(_),this.h()},h(){S(e,"class","variant svelte-krdepm"),B(e,"selected",n[0])},m(s,i){T(s,e,i),V(e,t),r||(o=$(e,"click",n[2]),r=!0)},p(s,[i]){i&1&&B(e,"selected",s[0])},i:O,o:O,d(s){s&&_(e),r=!1,o()}}}function He(n,e,t){let{json:r}=e,{currentVariantID:o}=e;const{name:s,id:i,branch:h}=r;let v=!1,u,b,l=r.description,m=r["pack.png"];const D=le();function E(){D("click",{id:i,url:u,description:l,image:m})}return ce(async()=>{if(r.url!==void 0&&(b=pe(r.url),t(5,u=Ae(b,"tree",h)),m===void 0&&t(7,m=_e(b,h,"pack.png")),l===void 0)){const c=await(await fetch(`https://api.github.com/repos/${b.owner}/${b.name}`,{headers:{Accept:"application/vnd.github.v3+json"}})).json();t(6,l=c.description)}v&&D("info",{id:i,url:u,description:l,image:m})}),n.$$set=w=>{"json"in w&&t(3,r=w.json),"currentVariantID"in w&&t(4,o=w.currentVariantID)},n.$$.update=()=>{n.$$.dirty&240&&(t(0,v=o===i),D("info",{id:i,url:u,description:l,image:m}))},[v,s,E,r,o,u,l,m]}class Te extends q{constructor(e){super(),F(this,e,He,ye,K,{json:3,currentVariantID:4})}}function ne(n,e,t){const r=n.slice();return r[17]=e[t],r}function se(n){let e,t;return e=new Te({props:{currentVariantID:n[1],json:n[17]}}),e.$on("click",n[7]),e.$on("info",n[8]),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,o){de(e,r,o),t=!0},p(r,o){const s={};o&2&&(s.currentVariantID=r[1]),e.$set(s)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){he(e,r)}}}function re(n){let e,t,r,o;return{c(){e=R("("),t=A("a"),r=R("GitHub"),o=R(")"),this.h()},l(s){e=U(s,"("),t=y(s,"A",{href:!0});var i=H(t);r=U(i,"GitHub"),i.forEach(_),o=U(s,")"),this.h()},h(){S(t,"href",n[4])},m(s,i){T(s,e,i),T(s,t,i),V(t,r),T(s,o,i)},p(s,i){i&16&&S(t,"href",s[4])},d(s){s&&_(e),s&&_(t),s&&_(o)}}}function Ne(n){let e,t,r,o,s,i,h,v,u,b,l,m,D,E,w=n[6],c=[];for(let f=0;f<w.length;f+=1)c[f]=se(ne(n,w,f));const N=f=>M(c[f],1,1,()=>{c[f]=null});let k=n[4]!==void 0&&re(n);return{c(){e=A("div"),t=A("img"),o=J(),s=A("div"),i=A("h5"),h=R(n[5]),v=J(),u=A("div");for(let f=0;f<c.length;f+=1)c[f].c();b=J(),l=A("div"),m=R(n[2]),D=J(),k&&k.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var a=H(e);t=y(a,"IMG",{class:!0,src:!0,alt:!0}),o=L(a),s=y(a,"DIV",{class:!0});var g=H(s);i=y(g,"H5",{class:!0});var d=H(i);h=U(d,n[5]),d.forEach(_),v=L(g),u=y(g,"DIV",{class:!0});var I=H(u);for(let G=0;G<c.length;G+=1)c[G].l(I);I.forEach(_),b=L(g),l=y(g,"DIV",{class:!0});var p=H(l);m=U(p,n[2]),D=L(p),k&&k.l(p),p.forEach(_),g.forEach(_),a.forEach(_),this.h()},h(){S(t,"class","addon__image svelte-wtrwh8"),ee(t.src,r=n[3])||S(t,"src",r),S(t,"alt","Addon icon"),B(t,"default",n[3]===n[0]),S(i,"class","addon__name"),S(u,"class","addon__variants svelte-wtrwh8"),S(l,"class","addon__description"),S(s,"class","addon__content svelte-wtrwh8"),S(e,"class","addon svelte-wtrwh8")},m(f,a){T(f,e,a),V(e,t),V(e,o),V(e,s),V(s,i),V(i,h),V(s,v),V(s,u);for(let g=0;g<c.length;g+=1)c[g].m(u,null);V(s,b),V(s,l),V(l,m),V(l,D),k&&k.m(l,null),E=!0},p(f,[a]){if((!E||a&8&&!ee(t.src,r=f[3]))&&S(t,"src",r),a&9&&B(t,"default",f[3]===f[0]),a&450){w=f[6];let g;for(g=0;g<w.length;g+=1){const d=ne(f,w,g);c[g]?(c[g].p(d,a),C(c[g],1)):(c[g]=se(d),c[g].c(),C(c[g],1),c[g].m(u,null))}for(Q(),g=w.length;g<c.length;g+=1)N(g);Z()}(!E||a&4)&&z(m,f[2]),f[4]!==void 0?k?k.p(f,a):(k=re(f),k.c(),k.m(l,null)):k&&(k.d(1),k=null)},i(f){if(!E){for(let a=0;a<w.length;a+=1)C(c[a]);E=!0}},o(f){c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)M(c[a]);E=!1},d(f){f&&_(e),me(c,f),k&&k.d()}}}const oe="No description";function Re(n,e,t){let{defaultImage:r}=e,{json:o}=e;const s=le(),{name:i,variants:h}=o,v=o.default,u=o.id_pos-1;let b=v,l=oe,m=r,D;function E(a){t(1,b=a),s("variant",{pos:u,variant:b})}function w(a){t(4,D=a.url),t(2,l=a.description??oe),t(3,m=a.image??r)}function c(a){w(a.detail),E(a.detail.id)}function N(a){b===a.detail.id&&(w(a.detail),E(a.detail.id))}function k(){E("x")}function f(){E(v)}return n.$$set=a=>{"defaultImage"in a&&t(0,r=a.defaultImage),"json"in a&&t(9,o=a.json)},[r,b,l,m,D,i,h,c,N,o,k,f]}class Ue extends q{constructor(e){super(),F(this,e,Re,Ne,K,{defaultImage:0,json:9,reset:10,resetDefault:11})}get reset(){return this.$$.ctx[10]}get resetDefault(){return this.$$.ctx[11]}}function ae(n,e,t){const r=n.slice();return r[13]=e[t],r[14]=e,r[15]=t,r}function Ce(n){let e,t,r,o,s,i,h,v,u,b,l,m,D,E,w,c,N,k,f=n[2],a=[];for(let d=0;d<f.length;d+=1)a[d]=ie(ae(n,f,d));const g=d=>M(a[d],1,1,()=>{a[d]=null});return{c(){e=A("h3"),t=R("Minecraft version: "),r=R(n[1]),o=J(),s=A("div"),i=A("button"),h=R("Reset"),v=J(),u=A("button"),b=R("Select defaults"),l=J(),m=A("a"),D=R("Download"),E=J(),w=A("div");for(let d=0;d<a.length;d+=1)a[d].c();this.h()},l(d){e=y(d,"H3",{});var I=H(e);t=U(I,"Minecraft version: "),r=U(I,n[1]),I.forEach(_),o=L(d),s=y(d,"DIV",{class:!0});var p=H(s);i=y(p,"BUTTON",{class:!0});var G=H(i);h=U(G,"Reset"),G.forEach(_),v=L(p),u=y(p,"BUTTON",{class:!0});var X=H(u);b=U(X,"Select defaults"),X.forEach(_),l=L(p),m=y(p,"A",{class:!0,href:!0});var Y=H(m);D=U(Y,"Download"),Y.forEach(_),p.forEach(_),E=L(d),w=y(d,"DIV",{class:!0});var x=H(w);for(let P=0;P<a.length;P+=1)a[P].l(x);x.forEach(_),this.h()},h(){S(i,"class","control svelte-yxuri1"),S(u,"class","control svelte-yxuri1"),S(m,"class","control svelte-yxuri1"),S(m,"href",n[5]),S(s,"class","controls svelte-yxuri1"),S(w,"class","addons svelte-yxuri1")},m(d,I){T(d,e,I),V(e,t),V(e,r),T(d,o,I),T(d,s,I),V(s,i),V(i,h),V(s,v),V(s,u),V(u,b),V(s,l),V(s,m),V(m,D),T(d,E,I),T(d,w,I);for(let p=0;p<a.length;p+=1)a[p].m(w,null);c=!0,N||(k=[$(i,"click",n[7]),$(u,"click",n[8])],N=!0)},p(d,I){if((!c||I&2)&&z(r,d[1]),(!c||I&32)&&S(m,"href",d[5]),I&85){f=d[2];let p;for(p=0;p<f.length;p+=1){const G=ae(d,f,p);a[p]?(a[p].p(G,I),C(a[p],1)):(a[p]=ie(G),a[p].c(),C(a[p],1),a[p].m(w,null))}for(Q(),p=f.length;p<a.length;p+=1)g(p);Z()}},i(d){if(!c){for(let I=0;I<f.length;I+=1)C(a[I]);c=!0}},o(d){a=a.filter(Boolean);for(let I=0;I<a.length;I+=1)M(a[I]);c=!1},d(d){d&&_(e),d&&_(o),d&&_(s),d&&_(E),d&&_(w),me(a,d),N=!1,ve(k)}}}function Ge(n){let e,t=n[3].message+"",r;return{c(){e=A("div"),r=R(t),this.h()},l(o){e=y(o,"DIV",{class:!0});var s=H(e);r=U(s,t),s.forEach(_),this.h()},h(){S(e,"class","error")},m(o,s){T(o,e,s),V(e,r)},p(o,s){s&8&&t!==(t=o[3].message+"")&&z(r,t)},i:O,o:O,d(o){o&&_(e)}}}function ie(n){let e,t=n[15],r;const o=()=>n[12](e,t),s=()=>n[12](null,t);let i={defaultImage:n[0],json:n[13]};return e=new Ue({props:i}),o(),e.$on("variant",n[6]),{c(){ue(e.$$.fragment)},l(h){fe(e.$$.fragment,h)},m(h,v){de(e,h,v),r=!0},p(h,v){t!==h[15]&&(s(),t=h[15],o());const u={};v&1&&(u.defaultImage=h[0]),v&4&&(u.json=h[13]),e.$set(u)},i(h){r||(C(e.$$.fragment,h),r=!0)},o(h){M(e.$$.fragment,h),r=!1},d(h){s(),he(e,h)}}}function Je(n){let e,t,r,o,s,i,h;const v=[Ge,Ce],u=[];function b(l,m){return l[3]!==void 0?0:1}return o=b(n),s=u[o]=v[o](n),{c(){e=A("h2"),t=R("Custom downloads"),r=J(),s.c(),i=te()},l(l){e=y(l,"H2",{});var m=H(e);t=U(m,"Custom downloads"),m.forEach(_),r=L(l),s.l(l),i=te()},m(l,m){T(l,e,m),V(e,t),T(l,r,m),u[o].m(l,m),T(l,i,m),h=!0},p(l,[m]){let D=o;o=b(l),o===D?u[o].p(l,m):(Q(),M(u[D],1,1,()=>{u[D]=null}),Z(),s=u[o],s?s.p(l,m):(s=u[o]=v[o](l),s.c()),C(s,1),s.m(i.parentNode,i))},i(l){h||(C(s),h=!0)},o(l){M(s),h=!1},d(l){l&&_(e),l&&_(r),u[o].d(l),l&&_(i)}}}const Le="https://raw.githubusercontent.com/Love-and-Tolerance/pack-release-builder/mane/assets.json";function Me(n,e,t){let r,o="",s="",i="N/A",h="N/A",v=[],u=[],b;const l=[];ce(async()=>{const c=await fetch(Le),N=De.safeParse(await c.json());if(!N.success){t(3,b=ke(N.error));return}const k=N.data,f=pe(k.repos.base.url);t(0,o=_e(f,void 0,"pack.png")),t(9,s=k.repos.base.filename),t(1,i=`${k.repos.base.mc_versions}`),t(10,h=k.repos.base.version),t(9,s=`https://github.com/${f.owner}/${f.name}/releases/download/${h}/${s}`),t(2,v=k.repos.addons)});function m(c){t(11,u[c.detail.pos]=c.detail.variant,u)}function D(){for(const c of l)c.reset()}function E(){for(const c of l)c.resetDefault()}function w(c,N){ge[c?"unshift":"push"](()=>{l[N]=c,t(4,l)})}return n.$$.update=()=>{n.$$.dirty&3584&&t(5,r=s.replace("{version}",h).replace("{ids}",u.join("")))},[o,i,v,b,l,r,m,D,E,s,h,u,w]}class $e extends q{constructor(e){super(),F(this,e,Me,Je,K,{})}}export{$e as default};
